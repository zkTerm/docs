---
title: zkID API
description: 'API reference for zkID identity operations'
---

## Register

Create a new privacy-preserving zkID identity.

```bash
POST /api/auth/register
```

**Request:**
```json
{
  "username": "alice",
  "password": "secure_password_123",
  "identityPublicKey": "base64_public_key",
  "identityPrivateKeyEncrypted": "base64_encrypted",
  "identityPrivateKeyIv": "base64_iv",
  "kdfSalt": "base64_salt",
  "kdfIterations": 200000
}
```

**Response:**
```json
{
  "message": "zkID created successfully",
  "user": {
    "id": "uuid",
    "username": "alice",
    "zkId": "did:zk:a7Bk9mX2pQ4r",
    "identityPublicKey": "base64_public_key"
  }
}
```

---

## Login

Authenticate using zkID credentials.

```bash
POST /api/auth/login
```

**Request:**
```json
{
  "username": "alice",
  "password": "secure_password_123"
}
```

**Response:**
```json
{
  "message": "Login successful",
  "user": {
    "id": "uuid",
    "username": "alice",
    "zkId": "did:zk:a7Bk9mX2pQ4r"
  }
}
```

---

## Logout

End the current session.

```bash
POST /api/auth/logout
```

**Response:**
```json
{
  "message": "Logged out successfully"
}
```

---

## Get Session

Check current authentication status.

```bash
GET /api/auth/session
```

**Response (authenticated):**
```json
{
  "authenticated": true,
  "user": {
    "id": "uuid",
    "username": "alice",
    "zkId": "did:zk:a7Bk9mX2pQ4r",
    "identityPublicKey": "base64_public_key"
  }
}
```

**Response (not authenticated):**
```json
{
  "authenticated": false
}
```

---

## Upgrade Legacy Account

Upgrade account without zkID to full zkID verification.

```bash
POST /api/auth/upgrade-legacy
```

**Request:**
```json
{
  "identityPublicKey": "base64_public_key",
  "identityPrivateKeyEncrypted": "base64_encrypted",
  "identityPrivateKeyIv": "base64_iv",
  "kdfSalt": "base64_salt",
  "kdfIterations": 200000
}
```

---

## Submit Starknet Proof

Submit zkID proof to Starknet for on-chain verification.

```bash
POST /api/starknet/submit-proof
```

**Request:**
```json
{
  "zkId": "did:zk:a7Bk9mX2pQ4r",
  "publicKey": "base64_public_key",
  "signature": "base64_signature"
}
```

**Response:**
```json
{
  "success": true,
  "txHash": "0x123...",
  "contractAddress": "0x456..."
}
```

---

## Error Codes

| Code | Description |
|------|-------------|
| 400 | Username already exists |
| 401 | Invalid credentials |
| 401 | Not authenticated |
| 409 | Proof already exists |
| 500 | Failed to create zkID |
